window.console&&console.log||!function(){for(var a=function(){},b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d=window.console={};c--;)d[b[c]]=a}();var waitForFinalEvent=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId"),a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}();!function(a){function b(){("gallery"===u.attr("data-display")||"press"===u.attr("data-display"))&&A.fadeIn()}function c(){r=x.length,s=Math.floor(r/2)}function d(){w.height(u.hasClass("admin-bar")?t.height()-32:t.height()),x.each(function(){var b,c=a(this);c.height(u.hasClass("admin-bar")?t.height()-32:t.height()),b=c.index()<=Math.floor(r/2)?t.width()/2+c.index()*c.width():t.width()/2-(r-c.index())*c.width(),c.css({left:b}),c.attr("data-showing",c.index()),0===c.index()&&n()})}function e(b){x.each(function(){var b=a(this);b.addClass("preload"),setTimeout(function(){b.remove()},210)}),b&&b()}function f(b,e){setTimeout(function(){b.images.forEach(function(e,f){0===f&&(x=a());var g=a('<img src="'+e.image+'" class="image preload">');x=x.add(g),c(),f===b.images.length-1&&(r=b.images.length,w.append(x),setTimeout(function(){"gallery"===u.attr("data-display")&&d(),imagesLoaded([g])&&g.removeClass("preload"),o(function(){"gallery"!==u.attr("data-display")&&y.removeClass("preload")}),i()},200))})},e?e:0)}function g(){var a=new XMLHttpRequest,b=document.getElementById("site-url").innerHTML;a.open("GET",b+"?request=content",!0),a.onload=function(){a.status>=200&&a.status<400&&(data=JSON.parse(a.responseText),u.attr("data-remember",b),f(data))},a.send()}function h(){var b=a('[data-showing="0"]');b.length>0?v.css("left",parseInt(b.css("left"),10)-b.width()/2-200).animate({opacity:1}):setTimeout(h,10)}function i(){var a=imagesLoaded("#images");a.on("progress",function(a,b){b.img.classList.remove("preload"),d(),h()})}function j(){if("gallery"===u.attr("data-display")){var b=a(this),c=+b.attr("data-showing");c>=1&&s>=c?u.addClass("nexting").removeClass("preving"):r-1>=c&&c>s?u.addClass("preving").removeClass("nexting"):k()}else k()}function k(){u.removeClass("nexting preving")}function l(){w.height(u.hasClass("admin-bar")?t.height()-32:t.height()),x.each(function(){var b,c=a(this),d=+c.attr("data-showing");c.height(u.hasClass("admin-bar")?t.height()-32:t.height()),b=s>=d?t.width()/2+d*c.width():t.width()/2-(r-d)*c.width(),c.css({left:b})})}function m(b){k(),"gallery"===u.attr("data-display")&&x.each(function(){var c,d=a(this),e=+d.attr("data-showing"),f=(e+b+r)%r;c=s>=f?t.width()/2+f*d.width():t.width()/2-(r-f)*d.width(),(s>=e&&f>s&&b>0||e>s&&s>=f&&0>b)&&d.hide(),d.animate({left:c},600,function(){(s>=e&&f>s&&b>0||e>s&&s>=f&&0>b)&&d.show()}),d.attr("data-showing",f)})}function n(){var b=a('[data-showing="0"]');b.length>0?y.css({left:parseInt(b.css("left"),10),"min-height":u.hasClass("admin-bar")?t.height()-32:t.height(),width:b.width()+2}):setTimeout(n,10)}function o(b){var c=a("#content"),d=u.hasClass("admin-bar")?t.height()-32:t.height();c.length>0&&c.css("top",c.height()<d?(d-c.height())/3:0),setTimeout(o,10),b&&b()}function p(a,c){A.hide();var d,g="",h=0;if(a.is_gallery)d="gallery",y.addClass("preload"),u.attr("data-remember")!==c&&(u.attr("data-remember",c),e(function(){f(a,500)}),h=500);else if(a.is_press){if(a.is_press){d="press";var i=a.clipping;i.forEach(function(a){g+='<p class="uppercase">'+a.link+"</p>",g+='<img src="'+a.image+'">'})}}else d="content",g=a.content;a.is_gallery||setTimeout(function(){z.animate({opacity:0})},h),setTimeout(function(){z.html(g),o(function(){z.animate({opacity:1}),y.removeClass("preload")}),b()},500+h),u.attr("data-display",d)}function q(b){var c=a(this),d=this.href;if(window.location.origin+window.location.pathname===d.replace("?request=content",""))return b.preventDefault();if("#"===this.href.slice(-1)&&c.closest("li").addClass("current-menu-item"),d.indexOf(location.origin)>-1&&d.indexOf("?request=content")>-1){b.preventDefault(),v.find(".current-menu-item").removeClass("current-menu-item"),v.find('[href="'+d+'"]').parent().addClass("current-menu-item").closest(".sub-menu").prev().parent().addClass("current-menu-item"),d=d.replace("?request=content","");var e=new XMLHttpRequest;e.open("GET",this.href,!0),e.onload=function(){if(e.status>=200&&e.status<400){data=JSON.parse(e.responseText),p(data,d);var a=data.title+" | DDUGOFF";window.history.pushState({},a,d),document.title=a}},e.send()}}var r,s,t=a(window),u=a("body"),v=(a("main"),a("nav")),w=a("#images"),x=a(".image"),y=a("#container"),z=a("#content"),A=a(".return-to-top");"gallery"===u.attr("data-display")&&u.attr("data-remember",window.location.origin+window.location.pathname),v.on("click","a",function(){a(this).next(".sub-menu").slideToggle()}),A.click(function(){a("html, body").animate({scrollTop:0},1e3)}),b(),c(),d(),"gallery"!==u.attr("data-display")&&g(),h(),i(),t.on("resize",function(){waitForFinalEvent(h,600,"showNav")}),u.on("mouseover",".image",j),t.on("resize",function(){waitForFinalEvent(l,500,"adjustSlideShow")}),u.on("click",".image",function(){var b=a(this),c=+b.attr("data-showing");m(0!==c&&s>=c?-c:r-c)}),t.keydown(function(a){37===a.keyCode&&m(1),39===a.keyCode&&m(-1)});var B=a("a");!function(){B=a("a"),B.each(function(){this.href.indexOf(location.origin)>-1&&"#"!==this.href.slice(-1)&&(this.href=this.href.replace("?request=content","")+"?request=content")})}(),n(),t.on("resize",function(){waitForFinalEvent(n,600,"sizeContainer"),waitForFinalEvent(o,600,"positionContent")}),B.click(q)}(jQuery);